\section{Configuration Management}

Due to the adoption of OpenStack it was necessary to find a way to manage
and configure machines in an automated way: since it was not possible
anymore to configure all the machines manually, CERN needed a solution to
set up new machines automatically. The Configuration Team provides a set
of tools and services that allow users to specify which tools and software
they need on their servers and get them configured in minutes.

\subsection{Puppet}

Puppet is an open-source configuration management utility that allows
service managers to describe the system configuration of their machines
using his own declarative language. It works with Unix-like and Windows
machines.

The user describes the status of the machine and his resources in a file
called "Puppet manifest", using Puppet's declarative language or Ruby DSL.
Before applying the catalog to the machine the catalog must be compiled
using the system's informations: Facter retrieves from the server all the
informations needed by Puppet to compile the catalog. Puppet compiles the
catalog using the informations provided by Facter to create
a system-specific manifest that will be applied against the target system.

Puppet describes the status of the system using a custom declarative
language which can be applied directly on the system or distributed to the
clients using a client/server paradigm. Service managers can specify their
configuration without the need to write system-specific commands, since
the description they provide using the Puppet manifest is operating system
independent.

\subsection{Foreman}

Foreman is a tool to manage the lifecycle and the provisioning of
machines. It provides an easy to use web interface to browse puppet
reports and manage machine's settings.

From Foreman the user is able to create and manage new machines assigning
them to a specified hostgroup/environment. When Puppet runs on a hosts it
queries Foreman's ENC to ask informations about the machine itself and
configures it accordingly.

\subsection{Git}

Git is an open-source revision control system with support for distributed
non-linear workflows. Every Git working directory is a complete full
repository with a complete history, independent of the network access.

In the latest years his popularity grew dramatically, mostly due to his
extreme elasticity, compatibility with existing protocols and support for
non-linear development.

\subsection{Jenkins}

Jenkins is an open-source continuous integration tool written in Java,
it's a server-based system running in a servlet container. It's
integration with most of the revision control systems and the multitude of
available plugins made its popularity grow year by year.

It is currently used by several open-source project to run unit and
functional tests on code written by contributors.

\subsection{Koji}

Koji is an RPM-based build system; it provides a flexible, secure and
reproducible way to build software. In combination with Git it provides
a fast way to package and distribute software.

When a developer is ready to release a new version of his software he can
use Koji to build it and tag it to the correct repository. In this way at
the next distro-sync all the machines will receive the updates.

\subsection{Jens}

Jens is a python-toolkit developed at CERN to generate puppet environments
dynamically, based on some input metadata. It is used to give service
managers the elasticity they need to configure their services while
dealing with shared modules.

\subsection{Rundeck}

Rundeck is used to automate operations and repetitive actions: it allows
the user to define a workflow and a series of actions to do. Those
workflows can be sheduled or triggered. In particular Rundeck became more
and more popular in the DevOps ecosystem due to the possibility to easily
integrate him with other components and software, making easy for final
users to define autonomously new workflows and procedures.

\subsection{MCollective}

MCollective is a framework for server orchestration: it allows user to run
actions on a multitude of hosts. It is used extensively when it is
necessary to deal with several machines at the same time: trigger
a command on multiple servers, get the status of a package or a service,
etc..

It is well integrated with Puppet and Foreman, allowing us to trigger
actions on a specified hostgroup/environment directly from the command
line.

\subsection{Roger}

It manages two important pieces of machine state. Whether you want alarms
switched on (or, more accurately, whether you want alarms to be masked),
and what the current state of the machine is. Optionally you can then use
those state transitions to take actions, such as to remove a machine
from a load balancer.

\subsection{TBag}

Due to the shared modules and code we had to find a solution to provide
secrets (like password, certificates and keytab files) in a secure way.
Since it many people have access to the repositories it is not secure to
store secrets in there.

To solve this problem we developed TBag (Trusted Bag) a service that
allows users to define secrets at host/hostgroup level. The secrets can be
retrieved only by the specified host using a custom class in the puppet
manifest.

